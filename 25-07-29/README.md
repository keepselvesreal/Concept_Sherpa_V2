# Knowledge Sherpa Q&A 세션 관리 시스템

이 시스템은 Claude Code 세션 간 Q&A 기록 관리를 위한 도구들을 제공합니다.

## 🏗️ 구성 요소

### 1. `save_qa_session.py`
- **기능**: 사용자 질문과 Claude 답변을 파일에 저장
- **특징**: 
  - `date` 명령어로 한국 시간 자동 가져오기
  - 세션 번호 자동 증가
  - 지정된 형식으로 저장

```bash
# 사용법
python3 save_qa_session.py "질문" "답변" [파일경로]

# 예시
python3 save_qa_session.py "OOP의 문제점은?" "OOP는 복잡성을 증가시킵니다..."
```

### 2. `knowledge_qa.py`
- **기능**: Neon DB 검색 → 답변 생성 → 세션 저장 통합 처리
- **특징**:
  - 상위 디렉토리의 Neon DB 모듈 활용
  - 검색 결과 기반 답변 자동 생성
  - 전체 프로세스 자동화

```bash
# 사용법
python3 knowledge_qa.py "검색할 질의" [저장파일경로]

# 예시  
python3 knowledge_qa.py "OOP의 문제점은 무엇인가?"
```

### 3. `.claude/commands/qa.md`
- **기능**: Claude Code 커스텀 명령어
- **특징**:
  - 이전 대화 기록 자동 로드
  - 새로운 질문 처리
  - 전체 워크플로우 자동화

```bash
# 사용법
/qa "새로운 질문"
/qa  # 대화형 모드
```

### 4. `qa_sessions.md`
- **기능**: 모든 Q&A 세션 누적 저장
- **형식**:
```
세션N(시작 시간: YYYY-MM-DD HH:MM:SS)
질문: [사용자 질문]
답변: [Claude 답변]

```

## 🔄 사용 시나리오

### 첫 번째 세션
1. Claude Code 시작
2. `/qa "첫 번째 질문"` 실행
3. Neon DB에서 관련 자료 검색
4. 검색 결과 기반 답변 생성
5. `qa_sessions.md`에 세션1 저장

### 두 번째 세션 (새로운 Claude Code 세션)
1. 새로운 Claude Code 시작
2. `/qa` 실행
3. 이전 `qa_sessions.md` 내용을 컨텍스트로 로드
4. 새로운 질문 입력
5. 답변 생성 후 세션2로 추가 저장

### 반복...
- 매 세션마다 이전 모든 대화 기록이 컨텍스트로 제공됨
- 일관성 있는 답변 가능
- 누적된 지식 기반 대화

## ✅ 테스트 결과

```bash
# 세션 저장 테스트
✅ 세션1 저장 완료: qa_sessions.md
✅ 세션2 저장 완료: qa_sessions.md

# 저장된 내용 확인
세션1(시작 시간: 2025-07-29 11:41:30)
질문: 테스트 질문입니다
답변: 테스트 답변입니다. 시스템이 정상 작동합니다.

세션2(시작 시간: 2025-07-29 11:41:46)  
질문: 두 번째 테스트 질문
답변: 두 번째 답변입니다. 세션 누적이 정상 작동합니다.
```

## 📋 요구사항

- Python 3.x
- 상위 디렉토리에 `embedding_service_v2.py`, `neon_vector_db.py` 필요
- Neon DB 연결 설정 필요 (전체 시스템 테스트용)

## 🚀 향후 개선사항

- 오류 처리 강화
- 세션 검색 기능
- 세션 삭제/편집 기능
- 다양한 출력 형식 지원