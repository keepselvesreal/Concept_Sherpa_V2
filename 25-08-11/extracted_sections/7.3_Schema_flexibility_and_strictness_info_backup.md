# 추가 정보

## 핵심 내용
JSON Schema에서 맵(객체)의 필드는 기본적으로 선택적(optional)이며, 필수 필드로 만들려면 `required` 배열에 명시해야 합니다. 또한 스키마에 정의되지 않은 추가 속성은 기본적으로 허용되지만, `additionalProperties: false`로 설정하여 엄격하게 제한할 수 있습니다. 데이터 검증 시에는 "보내는 데이터는 엄격하게, 받는 데이터는 유연하게"라는 견고성 원칙을 따르는 것이 좋은 관례입니다.

## 상세 핵심 내용
### JSON Schema의 유연성과 엄격성

JSON Schema는 데이터 검증에서 유연성과 엄격성 사이의 균형을 제공하는 중요한 도구입니다.

### 필수 필드와 선택적 필드

JSON Schema에서 객체의 필드는 기본적으로 선택적(optional)입니다. 필수 필드로 지정하려면 `required` 배열에 명시해야 합니다.

**도서 검색 응답 예시**:
```json
[
  {
    "title": "7 Habits of Highly Effective People",
    "available": true,
    "isbn": "978-0812981605",
    "subtitle": "Powerful Lessons in Personal Change",
    "number_of_pages": 432
  },
  {
    "title": "The Power of Habit",
    "available": false,
    "isbn_13": "978-1982137274",
    "subtitle": "Why We Do What We Do in Life and Business",
    "subjects": ["Social aspects", "Habit", "Change (Psychology)"]
  }
]
```

이 예시에서 `title`과 `available` 필드만 필수이고, 나머지는 선택적입니다.

### 스키마 구성 원리

**기본 스키마 구조**:
```javascript
var searchBooksResponseSchema = {
  "type": "array",
  "items": {
    "type": "object",
    "required": ["title", "available"],
    "properties": {
      "title": {"type": "string"},
      "available": {"type": "boolean"},
      "subtitle": {"type": "string"},
      "number_of_pages": {"type": "integer"},
      "subjects": {
        "type": "array",
        "items": {"type": "string"}
      },
      "isbn": {"type": "string"},
      "isbn_13": {"type": "string"}
    }
  }
};
```

### 스키마 조합성(Composability)

JSON Schema는 단순한 JSON 맵이므로, 다른 맵처럼 자유롭게 조합하고 조작할 수 있습니다:

```javascript
var bookInfoSchema = {
  "type": "object",
  "required": ["title", "available"],
  "properties": {
    "title": {"type": "string"},
    "available": {"type": "boolean"},
    "subtitle": {"type": "string"},
    "number_of_pages": {"type": "integer"},
    "subjects": {
      "type": "array",
      "items": {"type": "string"}
    },
    "isbn": {"type": "string"},
    "isbn_13": {"type": "string"}
  }
};

var searchBooksResponseSchema = {
  "type": "array",
  "items": bookInfoSchema
};
```

### 외부 데이터 소스 검증

외부에서 받은 데이터를 검증하는 것은 좋은 관행입니다. 데이터베이스 응답 스키마 예시:

```javascript
{
  "type": "array",
  "items": {
    "type": "object",
    "required": ["title", "isbn", "available"],
    "properties": {
      "title": {"type": "string"},
      "available": {"type": "boolean"},
      "isbn": {"type": "string"}
    }
  }
}
```

### additionalProperties 속성

JSON Schema의 중요한 특징 중 하나는 기본적으로 스키마에 정의되지 않은 추가 필드를 허용한다는 점입니다.

**문제가 되는 예시**:
```json
[
  {
    "title": "7 Habits of Highly Effective People",
    "available": true,
    "isbn": "978-0812981605",
    "dummy_property": 42
  }
]
```

추가 필드를 금지하려면 `additionalProperties: false`를 설정해야 합니다:

```javascript
var booksFromDBSchema = {
  "type": "array",
  "items": {
    "type": "object",
    "required": ["title", "isbn", "available"],
    "additionalProperties": false,
    "properties": {
      "title": {"type": "string"},
      "available": {"type": "boolean"},
      "isbn": {"type": "string"}
    }
  }
};
```

### 견고성 원칙(Robustness Principle)

Jon Postel의 견고성 원칙에 따르면: **"보내는 것은 보수적으로, 받아들이는 것은 관대하게"**

**실용적 적용**:
- **요청(Request)**: 추가 필드 허용 - 클라이언트에게 유연성 제공
- **응답(Response)**: 추가 필드 금지 - 서버는 엄격한 데이터 제공

### 핵심 원칙 정리

1. **필드 기본값**: JSON Schema에서 맵 필드는 기본적으로 선택적
2. **스키마 조합성**: JSON Schema는 맵이므로 자유로운 조합과 조작 가능
3. **외부 데이터 검증**: 외부 소스의 데이터는 항상 검증하는 것이 좋은 관행
4. **추가 필드 허용**: 기본적으로 스키마에 없는 필드도 허용됨
5. **견고성 원칙**: 보내는 데이터는 엄격하게, 받는 데이터는 관대하게

이러한 특성들은 JSON Schema가 실제 운영 환경에서 유연하면서도 안정적인 데이터 검증을 가능하게 합니다.

## 주요 화제
- JSON Schema의 필드 요구사항(required fields): JSON Schema에서 필드는 기본적으로 선택사항이며, 필수 필드로 만들려면 required 배열에 명시해야 함

- Schema 구성 및 재구조화(schema composition): JSON Schema를 변수로 분리하여 재사용 가능하게 만들고, 중첩된 스키마를 더 읽기 쉽게 리팩토링하는 방법

- 외부 데이터 소스 유효성 검사: 데이터베이스나 외부 API로부터 받은 데이터를 검증하는 모범 사례와 그 중요성

- additionalProperties 설정: JSON Schema에서 스키마에 정의되지 않은 추가 속성들의 허용 여부를 제어하는 방법과 기본값이 true인 이유

- 데이터 송수신 시 유연성과 엄격성의 균형: 요청 데이터는 유연하게 받아들이고 응답 데이터는 엄격하게 관리하는 Postel의 견고성 원칙 적용

## 부차 화제
- JSON Schema에서 필드의 필수/선택 사항 설정: required 배열을 사용하여 필수 필드를 지정하고, 맵의 필드는 기본적으로 선택 사항임

- 스키마의 구성과 재사용성: JSON Schema를 별도의 변수로 분리하여 재사용 가능하게 만들고 중첩을 줄여 가독성을 향상시키는 방법

- 외부 데이터 소스 검증의 중요성: 데이터베이스나 외부 API에서 받은 데이터를 검증하는 것이 좋은 관례라는 점

- additionalProperties 설정: JSON Schema에서 스키마에 명시되지 않은 추가 필드를 허용하거나 금지하는 방법과 기본값

- 요청과 응답에서의 유연성과 엄격성 원칙: 클라이언트 요청에는 유연하게, 서버 응답에는 엄격하게 대응하는 Jon Postel의 견고성 원칙

- 개인적 습관과 독서: Joe가 손톱 물어뜯는 습관을 고치기 위해 "The Power of Habit" 책을 읽고 있다는 일화
