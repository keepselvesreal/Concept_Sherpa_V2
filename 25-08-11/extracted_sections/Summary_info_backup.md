# 추가 정보

## 핵심 내용
DOP(Data-Oriented Programming) 원칙 #4는 데이터 스키마와 데이터 표현을 분리하는 것입니다. 시스템 경계에서 들어오고 나가는 데이터는 JSON Schema를 사용해 검증해야 하지만, 시스템 내부에서는 재검증이 필요하지 않습니다. JSON Schema는 표현력이 높고 맵처럼 조작할 수 있어 유연한 데이터 검증을 가능하게 합니다.

## 상세 핵심 내용
### DOP 원칙 #4: 데이터 스키마와 데이터 표현의 분리

Data-Oriented Programming(DOP)의 네 번째 핵심 원칙으로, 데이터의 구조를 정의하는 스키마와 실제 데이터의 표현 방식을 명확히 분리하는 것을 의미합니다.

### 시스템 경계와 데이터 검증

#### 시스템 경계의 정의
시스템의 경계는 외부와 데이터를 주고받는 지점으로 정의됩니다. 이는 시스템이 외부 환경과 상호작용하는 모든 접점을 포괄합니다.

#### 시스템 경계에서의 데이터 검증 사례
- **클라이언트 요청 검증**: 외부에서 들어오는 API 요청의 유효성 확인
- **응답 데이터 검증**: 클라이언트로 전송하는 응답 데이터의 형식 검증
- **외부 소스 데이터 검증**: 외부 데이터베이스나 서비스에서 받은 데이터의 검증

### DOP에서의 데이터 검증 개념

데이터 검증은 특정 데이터가 미리 정의된 스키마에 부합하는지 확인하는 과정입니다. 이는 단순한 형식 검사를 넘어서 데이터의 구조적 무결성을 보장합니다.

#### 검증 실패 시 처리 방식
- 검증이 실패할 경우, 구체적인 실패 정보를 수집
- 이 정보를 클라이언트가 이해할 수 있는 형태로 변환하여 전달
- 사용자 친화적인 오류 메시지 제공으로 개발자 경험 향상

#### 시스템 내부에서의 검증 전략
시스템 경계에서 데이터가 유효한 것으로 확인되면, 시스템 내부에서 반복적인 검증은 중요도가 낮아집니다. 이는 성능 최적화와 코드 중복 방지에 기여합니다.

### JSON Schema의 역할과 특성

#### 기본 개념
JSON Schema는 데이터 검증을 데이터 표현으로부터 분리할 수 있게 해주는 선언적 언어입니다. 이를 통해 데이터의 구조와 제약사항을 명확히 정의할 수 있습니다.

#### 구문적 특성
- **장황한 구문**: JSON Schema의 구문은 상당히 상세하고 명시적
- **높은 표현력**: 복잡한 데이터 구조와 제약조건을 정확히 표현 가능

#### 프로그래밍적 활용
- JSON Schema는 본질적으로 맵(객체) 구조
- 프로그램에서 다른 맵과 동일하게 조작 가능
- 스키마 정의를 변수에 저장하고 다른 스키마에서 재사용 가능
- 스키마의 동적 생성 및 수정 지원

#### 기본 동작 특성
JSON Schema에서 맵(객체)의 필드는 기본적으로 선택적(optional)입니다. 필수 필드는 명시적으로 지정해야 합니다.

### 데이터 검증 모범 사례

#### 외부 데이터 소스 검증
외부 데이터베이스, API, 파일 등에서 받은 데이터는 항상 검증하는 것이 좋습니다. 이는 데이터 무결성과 시스템 안정성을 보장합니다.

#### 견고성 원칙 (Robustness Principle)
- **송신 시**: 엄격한 데이터 형식을 준수하여 전송
- **수신 시**: 유연하게 데이터를 받아들이되, 필요한 검증은 수행
- 이는 시스템 간 호환성과 확장성을 향상시킵니다.

### JavaScript에서의 JSON Schema 구현

#### Ajv 라이브러리
JavaScript 환경에서 널리 사용되는 JSON Schema 검증 라이브러리로, 고성능과 다양한 기능을 제공합니다.

#### 기본 동작 특성
- **첫 번째 실패 감지**: 기본 설정에서는 첫 번째 검증 실패만을 포착
- 이는 성능 최적화를 위한 설계이지만, 설정을 통해 모든 오류를 수집하도록 변경 가능

### 고급 검증 기능

12장에서 다루는 고급 검증 기능은 더 복잡한 데이터 구조와 비즈니스 로직에 대한 검증 방법을 포함할 것으로 예상됩니다. 이는 실무에서 마주치는 복잡한 검증 요구사항을 해결하는 데 필요한 고급 기법들을 다룰 것입니다.

## 주요 화제
- DOP(Data-Oriented Programming) 원칙 #4: 데이터 스키마와 데이터 표현을 분리하는 원칙에 대한 설명

- 시스템 경계(System Boundaries): 시스템이 데이터를 교환하는 영역으로 정의되며, 클라이언트 요청/응답 검증과 외부 소스 데이터 검증을 포함

- 데이터 검증(Data Validation): DOP에서 데이터가 스키마에 부합하는지 확인하는 과정과 검증 실패 시 클라이언트에게 정보를 전달하는 방법

- JSON Schema: 데이터 검증과 표현을 분리할 수 있는 언어로, 문법의 장황함과 높은 표현력, 맵으로서의 조작 가능성에 대한 특징 설명

- JSON Schema 활용법: 스키마 정의를 변수에 저장하여 다른 스키마에서 재사용하는 방법과 맵 필드가 기본적으로 선택사항인 특성

- 데이터 검증 모범 사례: 외부 데이터 소스 검증의 중요성과 "보내는 데이터는 엄격하게, 받는 데이터는 유연하게" 처리하는 원칙

- Ajv 라이브러리: JavaScript의 JSON Schema 라이브러리로, 기본적으로 첫 번째 검증 실패만 포착하는 특성과 12장에서 다룰 고급 검증 기능

## 부차 화제
- JSON Schema 언어 특성: JSON Schema의 문법이 다소 장황하지만 표현력이 높다는 특성과, 스키마 정의를 변수에 저장하여 다른 스키마에서 재사용할 수 있는 활용법
- JSON Schema 기본 동작: 맵 필드가 기본적으로 선택사항이며, 스키마 자체도 맵으로서 프로그램 내에서 다른 맵과 동일하게 조작 가능한 특성
- 외부 데이터 소스 처리 원칙: 외부에서 오는 데이터에 대한 검증의 중요성과 "보내는 데이터에는 엄격하고 받는 데이터에는 유연하게" 하는 모범 사례
- Ajv 라이브러리 특성: JavaScript용 JSON Schema 라이브러리인 Ajv가 기본적으로 첫 번째 검증 실패만을 포착한다는 동작 방식
- 시스템 경계에서의 데이터 처리: 클라이언트 요청/응답 검증과 외부 소스 데이터 검증이 시스템 경계에서 이루어지며, 경계에서 유효한 데이터는 시스템 내부에서 재검증이 중요하지 않다는 원칙
- 검증 실패 처리 방식: 데이터가 유효하지 않을 때 검증 실패 정보를 수집하여 사람이 읽을 수 있는 형태로 클라이언트에게 전달하는 방법
