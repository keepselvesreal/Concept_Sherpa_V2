# 12.4 Automatic generation of data model diagrams

**페이지**: 287-289
**계층**: Data-Oriented Programming (node0) > Part3—Maintainability (node1) > 12 Advanced data validation (node2) > Chapter 12
**추출 시간**: 2025-08-06 19:47:18

---


--- 페이지 287 ---

12.3 Advanced data validation 259
Listing12.16 The refined schema of the catalog data (Part 1)
var isbnSchema = {
"type": "string",
"pattern": "^[0-9-]{10,20}$"
};
var libIdSchema = {
"type": "string",
"pattern": "^[a-z0-9-]{3,20}$"
};
var authorIdSchema ={
"type": "string",
"pattern": "[a-z-]{2,50}"
};
var bookItemSchema = {
"type": "object",
"additionalProperties": {
"id": uuidSchema,
"libId": libIdSchema,
"purchaseDate": {
"type": "string",
"format": "date"
},
"isLent": {"type": "boolean"}
}
};
Listing12.17 The refined schema of the catalog data (Part 2)
var bookSchema = {
"type": "object",
"required": ["title", "isbn", "authorIds", "bookItems"],
"properties": {
"title": {"type": "string"},
"publicationYear": publicationYearSchema,
"isbn": isbnSchema,
"publisher": {"type": "string"},
"authorIds": {
"type": "array",
"items": authorIdSchema
},
"bookItems": bookItemSchema
}
};
var authorSchema = {
"type": "object",
"required": ["id", "name", "bookIsbns"],
"properties": {
"id": {"type": "string"},
"name": {"type": "string"},

--- 페이지 287 끝 ---


--- 페이지 288 ---

260 CHAPTER 12 Advanced data validation
"bookIsbns": {
"items": isbnSchema
}
}
};
var catalogSchema = {
"type": "object",
"properties": {
"booksByIsbn": {
"type": "object",
"additionalProperties": bookSchema
},
"authorsById": {
"type": "object",
"additionalProperties": authorSchema
}
},
"required": ["booksByIsbn", "authorsById"]
};
12.4 Automatic generation of data model diagrams
Before going home, Theo phones Joe to tell him about how he and Dave used data valida-
tion inside the system. Joe tells Theo that that’s exactly how he recommends doing it and
suggests he come and visit Theo and Dave at the office tomorrow. He wants to show them
some cool advanced stuff related to data validation. The next day, with coffee in hand, Joe
starts the discussion.
Joe Are you guys starting to feel the power of data validation à la DOP?
Dave Yes, it’s a bit less convenient to validate a JSON Schema than it is to write the
class of function arguments, but this drawback is compensated by the fact that
JSON Schema supports conditions that go beyond static types.
Theo We also realized that we don’t have to validate data for each and every function.
Joe Correct. Now, let me show you another cool thing that we can do with JSON
Schema.
Dave What’s that?
Joe Generate a data model diagram.
Dave Wow! How does that work?
Joe There are tools that receive a JSON Schema as input and produce a diagram in
a data model format.
Dave What is a data model format?
Joe It’s a format that allows you to define a data model in plain text. After that, you
can generate an image from the text. My favorite data format is PlantUML.
 NOTE For more on PlantUML, see https://plantuml.com/.
Dave Do you know of other tools that generate data model diagrams?
Joe I have used JSON Schema Viewer and Malli.

--- 페이지 288 끝 ---


--- 페이지 289 ---

12.4 Automatic generation of data model diagrams 261
 NOTE You can find information on the JSON Schema Viewer at https://navneethg
.github.io/jsonschemaviewer/ and on Malli at https://github.com/metosin/malli.
Joe shows Dave and Theo the PlantUML diagram that Malli generated (listing 12.18) from
the catalog schema in listings 12.16 and 12.17.
Listing12.18 A PlantUML diagram generated from the catalog data schema
@startuml
Entity1 *-- Entity2
Entity1 *-- Entity4
Entity2 *-- Entity3
class Entity1 {
+ booksByIsbn: {Entity2}
+ authorsById: {Entity4}
}
class Entity2 {
+ title : String
+ publicationYear: Number
+ isbn: String
+ authorIds: [String]
+ bookItems: [Entity3]
}
class Entity3 {
+ id: String
+ libId: String
+ purchaseDate: String
+ isLent: Boolean
}
class Entity4 {
+ id: String
+ name: String
+ bookIsbns: [String]
}
@enduml
Dave Is it possible to visualize this diagram?
Joe Absolutely. Let me copy and paste the diagram text into the PlantText online
tool.
 NOTE See https://www.planttext.com/ for more on the PlantText online tool.
Dave opens his web browser and types the URL for PlantText. After copying and pasting
the text, he steps aside so that Theo and Dave can view the diagram that looks like the
image in figure 12.2.

--- 페이지 289 끝 ---
