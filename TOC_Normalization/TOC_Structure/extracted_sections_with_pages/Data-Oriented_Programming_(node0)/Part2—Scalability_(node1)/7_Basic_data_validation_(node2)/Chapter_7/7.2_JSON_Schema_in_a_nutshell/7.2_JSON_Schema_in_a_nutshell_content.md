# 7.2 JSON Schema in a nutshell

**페이지**: 175-177
**계층**: Data-Oriented Programming (node0) > Part2—Scalability (node1) > 7 Basic data validation (node2) > Chapter 7
**추출 시간**: 2025-08-06 19:47:01

---


--- 페이지 175 ---

7.2 JSON Schema in a nutshell 147
"properties": {
"title": {"type": "string"},
"fields": {
"type": "array",
"items": {
"enum": [
"publishers",
"number_of_pages",
"weight",
"physical_format",
"subjects",
"publish_date",
"physical_dimensions"
]
}
}
},
"required": ["title", "fields"]
};
Joe Now I’ll show you how to validate a piece of data according to a schema.
Theo What do you mean, validate?
Joe Validating data according to a schema means checking whether data conforms
to the schema. In our case, it means checking whether a piece of data is a valid
search books request.
TIP Data validation in DOP means checking whether a piece of data conforms to a
schema.
Theo I see.
Joe There are a couple of libraries that provide JSON Schema validation. They
have a validate function that receives a schema and a piece of data and
returns true when the data is valid and false when the data is not valid. I just
happen to have a file in my laptop that provides a table with a list of schema
validation libraries (table 7.2). We can print it out if you like.
Theo turns on the printer as Joe scans through his laptop for the table. When he has it up,
he checks with Theo and presses Print.
Table 7.2 Libraries for JSON Schema validation
Language Library URL
JavaScript Ajv https://github.com/ajv-validator/ajv
Java Snow https://github.com/ssilverman/snowy-json
C# JSON.net Schema https://www.newtonsoft.com/jsonschema
Python jschon https://github.com/marksparkza/jschon
Ruby JSONSchemer https://github.com/davishmcclurg/json_schemer

--- 페이지 175 끝 ---


--- 페이지 176 ---

148 CHAPTER 7 Basic data validation
Theo So, if I call validate with this search request and that schema, it will return
true?
Theo indicates the search request example from listing 7.7 and the schema from listing 7.6.
Listing7.7 An example of a search request
{
"title": "habit",
"fields": ["title", "weight", "number_of_pages"]
}
Joe Give it a try, and you’ll see.
Indeed! When Theo executes the code to validate the search request, it returns true.
Listing7.8 Validating the search request
var searchBooksRequestSchema = {
"type": "object",
"properties": {
"title": {"type": "string"},
"fields": {
"type": "array",
"items": {"type": "string"}
}
},
"required": ["title", "fields"]
};
var searchBooksRequest = {
"title": "habit",
"fields": ["title", "weight", "number_of_pages"]
};
validate(searchBooksRequestSchema, searchBooksRequest);
// → true
Joe Now, please try an invalid request.
Theo Let me think about what kind of invalidity to try. I know, I’ll make a typo in the
title field and call it tilte with the l before the t.
As expected, the code with the type returns false. Theo is not surprised, and Joe is smil-
ing from ear to ear.
Listing7.9 Validating an invalid search request
var invalidSearchBooksRequest = {
"tilte": "habit",
"fields": ["title", "weight", "number_of_pages"]
};

--- 페이지 176 끝 ---


--- 페이지 177 ---

7.3 Schema flexibility and strictness 149
validate(searchBooksRequestSchema, invalidSearchBooksRequest);
// → false
Theo The syntax of JSON Schema is much more verbose than the syntax for declar-
ing the members in a class. Why is that so?
Joe For two reasons. First, because JSON Schema is language independent, it can
be used in any programming language. As I told you, there are JSON Schema
validators available in most programming languages.
Theo I see.
Joe Second, JSON Schema allows you to express validation conditions that are much
harder, if not impossible, to express when data is represented with classes.
TIP The expressive power of JSON Schema is high!
Theo Now you have triggered my curiosity. Can you give me some examples?
Joe In a moment, we’ll talk about schema composition. Someday I’ll show you
some examples of advanced validation.
 NOTE Advanced validation is covered in chapter 12.
Theo What kind of advanced validation?
Joe What I mean by advanced validation is, for instance, validating that a number
falls within a given range or validating that a string matches a regular expression.
Theo Is there a way to get details about why the request is invalid?
Joe Absolutely! I’ll show you later. For now, let me show you how to make sure the
response the server sends back to the client is valid.
Theo It sounds much more complicated than a search book request!
Joe Why?
Theo Because a search response is made of multiple book results, and in each book
result, some of the fields are optional!
7.3 Schema flexibility and strictness
Joe Can you give me an example of what a book search response would look like?
Theo Take a look at this example. It’s a search response with information about two
books: 7 Habits of Highly Effective People and The Power of Habit.
Listing7.10 An example of a search response
[
{
"title": "7 Habits of Highly Effective People",
"available": true,
"isbn": "978-0812981605",
"subtitle": "Powerful Lessons in Personal Change",
"number_of_pages": 432
},

--- 페이지 177 끝 ---
